<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>탈래말래 - 환경 설정</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- 외부 네비게이션 로드 스크립트 -->
    <script src="nav.js"></script>

    <style>
      @import url("https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600;700&display=swap");

      body {
        font-family: "Pretendard", sans-serif;
        background-color: #f8fafc;
      }

      .glass-panel {
        background: rgba(255, 255, 255, 0.92);
        backdrop-filter: blur(12px);
        border: 1px solid rgba(255, 255, 255, 0.5);
        box-shadow: 0 8px 32px rgba(30, 27, 75, 0.05);
      }

      .custom-scroll::-webkit-scrollbar {
        width: 5px;
      }

      .custom-scroll::-webkit-scrollbar-thumb {
        background: #e2e8f0;
        border-radius: 10px;
      }

      /* 토글 스위치 커스텀 스타일 */
      .toggle-checkbox:checked {
        right: 0;
        border-color: #4f46e5;
      }
      .toggle-checkbox:checked + .toggle-label {
        background-color: #4f46e5;
      }

      /* QnA 아코디언 애니메이션 */
      .qna-item.active .qna-answer {
        max-height: 200px;
        margin-top: 1rem;
        opacity: 1;
      }
      .qna-item.active i[data-lucide="chevron-down"] {
        transform: rotate(180deg);
      }
      .qna-answer {
        max-height: 0;
        overflow: hidden;
        transition: all 0.3s ease-in-out;
        opacity: 0;
      }
    </style>
  </head>

  <body class="overflow-hidden">
    <div class="flex h-screen p-4 gap-4">
      <!-- 네비게이션 바 컨테이너 -->
      <div
        id="navbar-container"
        class="w-20 h-full shrink-0 rounded-[2.5rem]"
      ></div>

      <div
        class="flex-1 glass-panel rounded-[2.5rem] overflow-hidden flex flex-col"
      >
        <!-- 헤더 -->
        <div
          class="p-8 border-b border-slate-100 flex justify-between items-center"
        >
          <div>
            <h1 class="text-2xl font-extrabold text-slate-900 tracking-tight">
              환경 설정
            </h1>
            <p class="text-sm text-slate-400 font-medium mt-1">
              앱 알림, 보안 및 고객 지원 설정을 관리합니다.
            </p>
          </div>
        </div>

        <div class="flex-1 overflow-y-auto custom-scroll p-8">
          <div class="max-w-4xl mx-auto space-y-8">
            
            <!-- 1. 알림 설정 -->
            <section
              class="bg-white rounded-[2rem] p-8 border border-slate-100 shadow-sm"
            >
              <h3
                class="text-lg font-bold text-slate-900 mb-6 flex items-center gap-2"
              >
                <i data-lucide="bell" class="w-5 h-5 text-indigo-600"></i>
                알림 설정
              </h3>

              <div class="space-y-6">
                <div class="flex items-center justify-between">
                  <div>
                    <p class="text-sm font-bold text-slate-700">
                      마케팅 정보 수신
                    </p>
                    <p class="text-xs text-slate-400 mt-1">
                      이벤트, 쿠폰 및 프로모션 소식을 푸시 알림으로 받습니다.
                    </p>
                  </div>
                  <div
                    class="relative inline-block w-12 mr-2 align-middle select-none transition duration-200 ease-in"
                  >
                    <input
                      type="checkbox"
                      name="toggle"
                      id="noti-mkt"
                      class="toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer border-slate-200 transition-all duration-300 left-0 checked:left-6"
                      checked
                    />
                    <label
                      for="noti-mkt"
                      class="toggle-label block overflow-hidden h-6 rounded-full bg-slate-200 cursor-pointer transition-colors duration-300"
                    ></label>
                  </div>
                </div>
              </div>
            </section>

            <!-- 2. 계정 및 보안 -->
            <section
              class="bg-white rounded-[2rem] p-8 border border-slate-100 shadow-sm"
            >
              <h3
                class="text-lg font-bold text-slate-900 mb-6 flex items-center gap-2"
              >
                <i
                  data-lucide="shield-check"
                  class="w-5 h-5 text-indigo-600"
                ></i>
                계정 및 보안
              </h3>

              <div class="divide-y divide-slate-50">
                <button
                  onclick="location.href='changePassword.html'"
                  class="w-full py-4 flex items-center justify-between hover:bg-slate-50 transition-colors rounded-xl px-2 group"
                >
                  <span class="text-sm font-medium text-slate-700"
                    >비밀번호 변경</span
                  >
                  <i
                    data-lucide="chevron-right"
                    class="w-4 h-4 text-slate-300 group-hover:text-indigo-600 transition-transform"
                  ></i>
                </button>
                <button
                  onclick="location.href='blockManagement.html'"
                  class="w-full py-4 flex items-center justify-between hover:bg-slate-50 transition-colors rounded-xl px-2 group"
                >
                  <span class="text-sm font-medium text-slate-700"
                    >차단한 사용자 관리</span
                  >
                  <i
                    data-lucide="chevron-right"
                    class="w-4 h-4 text-slate-300 group-hover:text-indigo-600 transition-transform"
                  ></i>
                </button>
                <div
                  class="w-full py-4 flex items-center justify-between px-2"
                >
                  <span class="text-sm font-medium text-slate-700"
                    >안심번호 사용 설정</span
                  >
                  <span
                    class="text-xs font-bold text-indigo-600 bg-indigo-50 px-2 py-1 rounded-md"
                    >사용 중</span
                  >
                </div>
              </div>
            </section>

            <!-- 3. QnA 섹션 -->
            <section
              class="bg-white rounded-[2rem] p-8 border border-slate-100 shadow-sm"
            >
              <h3
                class="text-lg font-bold text-slate-900 mb-6 flex items-center gap-2"
              >
                <i
                  data-lucide="help-circle"
                  class="w-5 h-5 text-indigo-600"
                ></i>
                자주 묻는 질문 (Q&A)
              </h3>

              <div class="space-y-3">
                <div class="qna-item border border-slate-100 rounded-2xl p-4 cursor-pointer hover:bg-slate-50 transition-colors" onclick="toggleQna(this)">
                  <div class="flex justify-between items-center">
                    <p class="text-sm font-semibold text-slate-700 font-bold">동승 매칭은 어떻게 취소하나요?</p>
                    <i data-lucide="chevron-down" class="w-4 h-4 text-slate-400 transition-transform"></i>
                  </div>
                  <div class="qna-answer text-xs text-slate-500 leading-relaxed">
                    매칭 확정 전에는 '매칭 상세' 페이지에서 자유롭게 취소가 가능합니다. 다만, 확정 후 취소 시에는 매너 온도에 영향을 줄 수 있으니 유의해주세요.
                  </div>
                </div>

                <div class="qna-item border border-slate-100 rounded-2xl p-4 cursor-pointer hover:bg-slate-50 transition-colors" onclick="toggleQna(this)">
                  <div class="flex justify-between items-center">
                    <p class="text-sm font-semibold text-slate-700 font-bold">포인트 환불 규정이 궁금해요.</p>
                    <i data-lucide="chevron-down" class="w-4 h-4 text-slate-400 transition-transform"></i>
                  </div>
                  <div class="qna-answer text-xs text-slate-500 leading-relaxed">
                    충전 후 사용하지 않은 포인트는 7일 이내에 전액 환불 가능합니다. '마이페이지 > 결제 내역'에서 신청하실 수 있습니다.
                  </div>
                </div>

                <div class="qna-item border border-slate-100 rounded-2xl p-4 cursor-pointer hover:bg-slate-50 transition-colors" onclick="toggleQna(this)">
                  <div class="flex justify-between items-center">
                    <p class="text-sm font-semibold text-slate-700 font-bold">매너 온도가 낮아지면 불이익이 있나요?</p>
                    <i data-lucide="chevron-down" class="w-4 h-4 text-slate-400 transition-transform"></i>
                  </div>
                  <div class="qna-answer text-xs text-slate-500 leading-relaxed">
                    매너 온도가 일정 기준 이하로 떨어지면 서비스 이용에 제한이 생길 수 있으며, 매칭 우선순위에서 밀려날 수 있습니다.
                  </div>
                </div>
              </div>
            </section>

            <!-- 하단 정보 섹션 -->
            <div class="pb-12">
              <div
                class="bg-white rounded-[2rem] p-8 border border-slate-100 shadow-sm"
              >
                <h3 class="text-sm font-bold text-slate-900 mb-4">앱 정보</h3>
                <div class="space-y-3 text-sm text-slate-500">
                  <div class="flex justify-between">
                    <span>현재 버전</span>
                    <span class="font-bold text-slate-800">v1.2.4</span>
                  </div>
                  <!-- 이용약관 버튼 클릭 이벤트 연결 -->
                  <div
                    onclick="location.href='terms.html'"
                    class="flex justify-between cursor-pointer hover:text-indigo-600 group transition-colors"
                  >
                    <span class="group-hover:font-semibold">이용약관</span>
                    <i data-lucide="external-link" class="w-4 h-4"></i>
                  </div>
                  <!-- 개인정보 처리방침 버튼 클릭 이벤트 연결 -->
                  <div
                    onclick="location.href='privacy.html'"
                    class="flex justify-between cursor-pointer hover:text-indigo-600 group transition-colors"
                  >
                    <span class="group-hover:font-semibold">개인정보 처리방침</span>
                    <i data-lucide="external-link" class="w-4 h-4"></i>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // 기존 네비바 로드 및 활성화 호출
      if (typeof loadNavbar === 'function') {
        loadNavbar("nav-setting");
      }
      
      lucide.createIcons();

      // QnA 아코디언 토글 함수
      function toggleQna(element) {
        const isActive = element.classList.contains('active');
        
        // 모든 QnA 아이템 닫기
        document.querySelectorAll('.qna-item').forEach(item => {
          item.classList.remove('active');
        });

        // 클릭한 아이템이 닫혀있었다면 열기
        if (!isActive) {
          element.classList.add('active');
        }
      }
    </script>
  </body>
</html>